#freewall.free-wall

:javascript
  var pictures = #{set_pictures_data };

  var temp = "<a href='/pictures/{id}'><div class='brick' style='width:{width}px;'><img src='{image}' width='100%'></div></a>";
  var w = 1, html = '';
  $.each(pictures, function (index, image) {
      w = 1 + 3 * Math.random() << 0;
      html += temp.replace(/\{width\}/g, w*150).replace("{image}", image[0]).replace("{id}", image[1]);
  });

  $("#freewall").html(html);
  var wall = new Freewall("#freewall");
  wall.reset({
      selector: '.brick',
      // keepOrder: true,
      animate: true,
      cellW: 150,
      cellH: 'auto',
      animate: false,
      onResize: function() {
          wall.fitWidth();
      }
  });
  var images = wall.container.find('.brick');
  images.find('img').load(function() {
      wall.fitWidth();
  });